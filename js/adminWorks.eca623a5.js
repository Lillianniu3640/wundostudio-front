(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["adminWorks"],{"99af":function(e,A,t){"use strict";var r=t("23e7"),o=t("d039"),n=t("e8b5"),a=t("861d"),s=t("7b0b"),i=t("50c4"),l=t("8418"),c=t("65f0"),u=t("1dde"),d=t("b622"),f=t("2d00"),m=d("isConcatSpreadable"),p=9007199254740991,b="Maximum allowed index exceeded",h=f>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),k=u("concat"),v=function(e){if(!a(e))return!1;var A=e[m];return void 0!==A?!!A:n(e)},g=!h||!k;r({target:"Array",proto:!0,forced:g},{concat:function(e){var A,t,r,o,n,a=s(this),u=c(a,0),d=0;for(A=-1,r=arguments.length;A<r;A++)if(n=-1===A?a:arguments[A],v(n)){if(o=i(n.length),d+o>p)throw TypeError(b);for(t=0;t<o;t++,d++)t in n&&l(u,d,n[t])}else{if(d>=p)throw TypeError(b);l(u,d++,n)}return u.length=d,u}})},a434:function(e,A,t){"use strict";var r=t("23e7"),o=t("23cb"),n=t("a691"),a=t("50c4"),s=t("7b0b"),i=t("65f0"),l=t("8418"),c=t("1dde"),u=c("splice"),d=Math.max,f=Math.min,m=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!u},{splice:function(e,A){var t,r,c,u,b,h,k=s(this),v=a(k.length),g=o(e,v),w=arguments.length;if(0===w?t=r=0:1===w?(t=0,r=v-g):(t=w-2,r=f(d(n(A),0),v-g)),v+t-r>m)throw TypeError(p);for(c=i(k,r),u=0;u<r;u++)b=g+u,b in k&&l(c,u,k[b]);if(c.length=r,t<r){for(u=g;u<v-r;u++)b=u+r,h=u+t,b in k?k[h]=k[b]:delete k[h];for(u=v;u>v-r+t;u--)delete k[u-1]}else if(t>r)for(u=v-r;u>g;u--)b=u+r-1,h=u+t-1,b in k?k[h]=k[b]:delete k[h];for(u=0;u<t;u++)k[u+g]=arguments[u+2];return k.length=v-r+t,c}})},b0c0:function(e,A,t){var r=t("83ab"),o=t("9bf2").f,n=Function.prototype,a=n.toString,s=/^\s*function ([^ (]*)/,i="name";r&&!(i in n)&&o(n,i,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},b257:function(e,A,t){},d5ad:function(e,A,t){"use strict";t.r(A);var r=function(){var e=this,A=e.$createElement,r=e._self._c||A;return r("b-container",{attrs:{id:"adminworks"}},[r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("h4",{staticClass:"text-center"},[e._v("作品管理")])]),r("b-col",{attrs:{cols:"12"}},[r("b-img",{staticStyle:{width:"100%"},attrs:{src:t("fe82")}})],1),r("b-col",{attrs:{cols:"10"}}),r("b-col",{attrs:{cols:"2"}},[r("b-btn",{attrs:{variant:"dark"},on:{click:function(A){return e.$bvModal.show("modal-work")}}},[e._v("Add New")]),r("b-modal",{attrs:{id:"modal-work",title:e.form._id.length>0?"編輯作品":"新增作品","ok-variant":"warning","ok-title":"OK","cancel-variant":"secondary","cancel-title":"Cancel"},on:{ok:e.submitModal,hidden:e.resetForm}},[r("b-form-group",{attrs:{label:"作品名:","label-for":"input-name",state:e.state.name,description:"","invalid-feedback":"格式不正確"}},[r("b-form-input",{attrs:{id:"input-name",type:"text",required:"",placeholder:"請輸入名稱",state:e.state.name,autocomplete:"off"},model:{value:e.form.name,callback:function(A){e.$set(e.form,"name",A)},expression:"form.name"}})],1),r("b-form-group",{attrs:{label:"作品類型:","label-for":"input-subject"}},[r("b-form-input",{attrs:{id:"input-subject",type:"text",placeholder:"請輸入類型",autocomplete:"off"},model:{value:e.form.subject,callback:function(A){e.$set(e.form,"subject",A)},expression:"form.subject"}})],1),r("b-form-group",{attrs:{label:"描述:","label-for":"input-description"}},[r("b-form-textarea",{attrs:{id:"input-description",type:"text",placeholder:"請輸入說明文字"},model:{value:e.form.description,callback:function(A){e.$set(e.form,"description",A)},expression:"form.description"}})],1),r("b-form-group",{attrs:{label:"顯示","label-for":"input-sell"}},[r("b-form-radio",{attrs:{value:!0},model:{value:e.form.sell,callback:function(A){e.$set(e.form,"sell",A)},expression:"form.sell"}},[e._v("顯示")]),r("b-form-radio",{attrs:{value:!1},model:{value:e.form.sell,callback:function(A){e.$set(e.form,"sell",A)},expression:"form.sell"}},[e._v("不顯示")])],1),r("img-inputer",{attrs:{theme:"dark",size:"large",placeholder:"點擊或拖曳選擇圖片","bottom-text":"點擊或拖曳以修改"},model:{value:e.form.image,callback:function(A){e.$set(e.form,"image",A)},expression:"form.image"}})],1)],1),r("b-col",{staticClass:"mt-5 ml-4",attrs:{cols:"12"}},[r("b-table",{ref:"workTable",attrs:{items:e.works,fields:e.fields},scopedSlots:e._u([{key:"cell(image)",fn:function(A){return[A.item?r("img",{staticStyle:{height:"50px"},attrs:{src:A.item.image}}):e._e()]}},{key:"cell(sell)",fn:function(A){return[e._v(e._s(A.item.sell?"v":"x"))]}},{key:"cell(action)",fn:function(A){return[r("b-btn",{staticClass:"mr-2",attrs:{variant:"faded"},on:{click:function(t){return e.editWork(A.index)}}},[r("font-awesome-icon",{attrs:{icon:["fas","pen-nib"]}})],1),r("b-btn",{attrs:{variant:"faded"},on:{click:function(t){return e.deleteWork(A.index)}}},[r("font-awesome-icon",{attrs:{icon:["fas","trash"]}})],1)]}}])})],1)],1)],1)},o=[],n=t("1da1"),a=(t("96cf"),t("b0c0"),t("a4d3"),t("e01a"),t("a434"),t("99af"),t("d81d"),{data:function(){return{works:[],fields:[{key:"image",label:"圖片"},{key:"name",label:"作品名"},{key:"subject",label:"類別"},{key:"description",label:"描述"},{key:"sell",label:"顯示"},{key:"action",label:"操作"}],selected:[],options:["Illustrator","Photoshop","Premiere","Figma","Html","Css","Sass","Vue.js","Bootstrap","jQuery"],form:{name:"",subject:"",tools:"",description:"",sell:!0,image:null,_id:""}}},computed:{state:function(){return{name:0!==this.form.name.length||null}}},methods:{editWork:function(e){this.form={name:this.works[e].name,subject:this.works[e].subject,tools:this.works[e].tools,description:this.works[e].description,sell:this.works[e].sell,image:this.works[e].image,_id:this.works[e]._id,index:e},this.$bvModal.show("modal-work")},resetForm:function(){this.form={name:"",subject:"",tools:"",description:"",sell:!0,image:null,_id:""}},deleteWork:function(e){this.works.splice(e,1)},submitModal:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function A(){var t,r,o,n;return regeneratorRuntime.wrap((function(A){while(1)switch(A.prev=A.next){case 0:for(r in A.prev=0,t=new FormData,e.form)t.append(r,e.form[r]);if(0!==e.form._id.length){A.next=8;break}return A.next=6,e.axios.post("/works",t,{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 6:A.next=14;break;case 8:return A.next=10,e.axios.patch("/works/"+e.form._id,t,{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 10:o=A.sent,n=o.data,e.works[e.form.index]={name:e.form.name,subject:e.form.subject,tools:e.form.tools,description:e.form.description,sell:e.form.sell,image:"".concat("https://wundo-studio.herokuapp.com","/files/").concat(n.result.image),_id:e.form._id},e.$refs.workTable.refresh();case 14:e.$bvModal.hide("modal-work"),A.next=20;break;case 17:A.prev=17,A.t0=A["catch"](0),e.$swal({icon:"error",title:"Wrong",text:A.t0.response.data.message});case 20:case"end":return A.stop()}}),A,null,[[0,17]])})))()}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function A(){var t,r;return regeneratorRuntime.wrap((function(A){while(1)switch(A.prev=A.next){case 0:return A.prev=0,A.next=3,e.axios.get("/works");case 3:t=A.sent,r=t.data,e.works=r.result.map((function(e){return e.image="".concat("https://wundo-studio.herokuapp.com","/files/").concat(e.image),e})),A.next=11;break;case 8:A.prev=8,A.t0=A["catch"](0),e.$swal({icon:"error",title:"Wrong",text:"取得作品失敗"});case 11:case"end":return A.stop()}}),A,null,[[0,8]])})))()}}),s=a,i=(t("edea"),t("2877")),l=Object(i["a"])(s,r,o,!1,null,"2d3612b9",null);A["default"]=l.exports},d81d:function(e,A,t){"use strict";var r=t("23e7"),o=t("b727").map,n=t("1dde"),a=n("map");r({target:"Array",proto:!0,forced:!a},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},e01a:function(e,A,t){"use strict";var r=t("23e7"),o=t("83ab"),n=t("da84"),a=t("5135"),s=t("861d"),i=t("9bf2").f,l=t("e893"),c=n.Symbol;if(o&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var u={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),A=this instanceof d?new c(e):void 0===e?c():c(e);return""===e&&(u[A]=!0),A};l(d,c);var f=d.prototype=c.prototype;f.constructor=d;var m=f.toString,p="Symbol(test)"==String(c("test")),b=/^Symbol\((.*)\)[^)]+$/;i(f,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,A=m.call(e);if(a(u,e))return"";var t=p?A.slice(7,-1):A.replace(b,"$1");return""===t?void 0:t}}),r({global:!0,forced:!0},{Symbol:d})}},edea:function(e,A,t){"use strict";t("b257")},fe82:function(e,A){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAADE4AAAAcCAYAAADF9hsmAAAACXBIWXMAAAsSAAALEgHS3X78AAACvklEQVR4nO3dy03DQBQF0EnEnnSAO4AOYA+iBkqhJsveQwehg9ABHRhFslEWASlkxp+XcyRvR/OxR44nV2/VdV0CAAAAAAAAAAAAAACIaG1VAQAAAAAAAAAAAACAqAQnAAAAAAAAAAAAAACAsAQnAAAAAAAAAAAAAACAsAQnAAAAAAAAAAAAAACAsAQnAAAAAAAAAAAAAACAsAQnAAAAAAAAAAAAAACAsAQnAAAAAAAAAAAAAACAsAQnAAAAAAAAAAAAAACAsAQnAAAAAAAAAAAAAACAsAQnAAAAAAAAAAAAAACAsAQnAAAAAAAAAAAAAACAsAQnAAAAAAAAAAAAAACAsAQnAAAAAAAAAAAAAACAsK5KD6xp64cCzZZoE4jnUveKr5TSdgb9AABgue5SShvrV8RbwDGVtOnvR+blkn932h8BAAAATrf/pnJt3s72nqmd/fet2wnHkUOuucitSindFGj3o/8uu1TbAv0v8b+wUus3hTncMzn3/inG40xvPFV/zU2JvSvC/I/5bAxnkrunx+ddjgZXXded1UDT1tXBpA0TNxxq3+foJAAAAAAAAAAAAAAAEMY+DPl6ZDDZwhKH/hWcaNr6sIMvgVJ2AAAAAAAAAAAAAADAuD77KhM/V84AxdkVJ37TtHWJUkhK4S/PXEvowFINpYdy8pweV2KuAQCY3lAlk+l41waAfKY4NxmzFDsAAAAAAPO2669TFakq8ZdiwQkAAAAAAAAAAAAAAICpra0AAAAAAAAAAAAAAAAQleAEAAAAAAAAAAAAAAAQluAEAAAAAAAAAAAAAAAQluAEAAAAAAAAAAAAAAAQluAEAAAAAAAAAAAAAAAQluAEAAAAAAAAAAAAAAAQluAEAAAAAAAAAAAAAAAQluAEAAAAAAAAAAAAAAAQluAEAAAAAAAAAAAAAAAQU0rpGw9wRyeQUlvWAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=adminWorks.eca623a5.js.map